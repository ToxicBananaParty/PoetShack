var longSlydur = 50;
var slydur = 300;
window.onload = function(){
  document.querySelector("button").addEventListener("click", () => {
    displayText();
  });
}
const poemData = [{"poem":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In aliquet est sed metus porttitor venenatis. Quisque sagittis elit nibh, sed semper enim finibus ac. Etiam laoreet magna eget mi suscipit vestibulum. In hac habitasse platea dictumst. Vestibulum metus erat, rutrum sed commodo ut, rutrum id nisl. Etiam sodales pharetra nibh, sed porta quam convallis nec. Curabitur pretium nisl eros, eu scelerisque neque pulvinar ut. Integer commodo nunc at massa elementum, blandit rhoncus orci accumsan. Vestibulum commodo erat non tellus faucibus, egestas tristique turpis volutpat. Nullam ornare eget nunc vitae rhoncus. Nulla vel tempus massa, non egestas ipsum. Ut bibendum risus ut dui luctus, at bibendum enim convallis. Vivamus ac velit tincidunt, accumsan mauris id, suscipit tortor. Nunc lacinia ultrices est, in aliquet leo.","author":"Tester","id":11,"json":"{\n \"poem\": \"'Lorem ipsum dolor sit amet, consectetur adipiscing elit. In aliquet est sed metus porttitor venenatis. Quisque sagittis elit nibh, sed semper enim finibus ac. Etiam laoreet magna eget mi suscipit vestibulum. In hac habitasse platea dictumst. Vestibulum metus erat, rutrum sed commodo ut, rutrum id nisl. Etiam sodales pharetra nibh, sed porta quam convallis nec. Curabitur pretium nisl eros, eu scelerisque neque pulvinar ut. Integer commodo nunc at massa elementum, blandit rhoncus orci accumsan. Vestibulum commodo erat non tellus faucibus, egestas tristique turpis volutpat. Nullam ornare eget nunc vitae rhoncus. Nulla vel tempus massa, non egestas ipsum. Ut bibendum risus ut dui luctus, at bibendum enim convallis. Vivamus ac velit tincidunt, accumsan mauris id, suscipit tortor. Nunc lacinia ultrices est, in aliquet leo.'\",\n \"author\": \"'Tester'\",\n \"syllables\": [\n \"'Lo\",\n \"rem\",\n \"ip\",\n \"sum\",\n \"do\",\n \"lor\",\n \"sit\",\n \"a\",\n \"met,\",\n \"con\",\n \"sec\",\n \"te\",\n \"tur\",\n \"a\",\n \"di\",\n \"pis\",\n \"cing\",\n \"e\",\n \"lit.\",\n \"In\",\n \"a\",\n \"li\",\n \"quet\",\n \"est\",\n \"sed\",\n \"me\",\n \"tus\",\n \"por\",\n \"tti\",\n \"tor\",\n \"ve\",\n \"ne\",\n \"na\",\n \"tis.\",\n \"Quis\",\n \"que\",\n \"sa\",\n \"git\",\n \"tis\",\n \"e\",\n \"lit\",\n \"nibh,\",\n \"sed\",\n \"sem\",\n \"per\",\n \"e\",\n \"nim\",\n \"fi\",\n \"ni\",\n \"bus\",\n \"ac.\",\n \"E\",\n \"tiam\",\n \"lao\",\n \"reet\",\n \"mag\",\n \"na\",\n \"e\",\n \"get\",\n \"mi\",\n \"sus\",\n \"ci\",\n \"pit\",\n \"ves\",\n \"ti\",\n \"bu\",\n \"lum.\",\n \"In\",\n \"hac\",\n \"ha\",\n \"bi\",\n \"tas\",\n \"se\",\n \"pla\",\n \"tea\",\n \"dic\",\n \"tumst.\",\n \"Ves\",\n \"ti\",\n \"bu\",\n \"lum\",\n \"me\",\n \"tus\",\n \"e\",\n \"rat,\",\n \"rut\",\n \"rum\",\n \"sed\",\n \"com\",\n \"mo\",\n \"do\",\n \"ut,\",\n \"rut\",\n \"rum\",\n \"id\",\n \"nisl.\",\n \"E\",\n \"tiam\",\n \"so\",\n \"da\",\n \"les\",\n \"pha\",\n \"ret\",\n \"ra\",\n \"nibh,\",\n \"sed\",\n \"por\",\n \"ta\",\n \"quam\",\n \"con\",\n \"val\",\n \"lis\",\n \"nec.\",\n \"Cu\",\n \"ra\",\n \"bi\",\n \"tur\",\n \"pre\",\n \"tium\",\n \"nisl\",\n \"e\",\n \"ros,\",\n \"eu\",\n \"sce\",\n \"le\",\n \"ris\",\n \"que\",\n \"ne\",\n \"que\",\n \"pul\",\n \"vi\",\n \"nar\",\n \"ut.\",\n \"In\",\n \"te\",\n \"ger\",\n \"com\",\n \"mo\",\n \"do\",\n \"nunc\",\n \"at\",\n \"mas\",\n \"sa\",\n \"e\",\n \"le\",\n \"men\",\n \"tum,\",\n \"blan\",\n \"dit\",\n \"rhon\",\n \"cus\",\n \"or\",\n \"ci\",\n \"ac\",\n \"cum\",\n \"san.\",\n \"Ves\",\n \"ti\",\n \"bu\",\n \"lum\",\n \"com\",\n \"mo\",\n \"do\",\n \"e\",\n \"rat\",\n \"non\",\n \"tel\",\n \"lus\",\n \"fau\",\n \"ci\",\n \"bus,\",\n \"e\",\n \"ges\",\n \"tas\",\n \"tris\",\n \"ti\",\n \"que\",\n \"tur\",\n \"pis\",\n \"vo\",\n \"lut\",\n \"pat.\",\n \"Nul\",\n \"lam\",\n \"or\",\n \"na\",\n \"re\",\n \"e\",\n \"get\",\n \"nunc\",\n \"vi\",\n \"tae\",\n \"rhon\",\n \"cus.\",\n \"Nul\",\n \"la\",\n \"vel\",\n \"tem\",\n \"pus\",\n \"mas\",\n \"sa,\",\n \"non\",\n \"e\",\n \"ges\",\n \"tas\",\n \"ip\",\n \"sum.\",\n \"Ut\",\n \"bi\",\n \"ben\",\n \"dum\",\n \"ri\",\n \"sus\",\n \"ut\",\n \"dui\",\n \"luc\",\n \"tus,\",\n \"at\",\n \"bi\",\n \"ben\",\n \"dum\",\n \"e\",\n \"nim\",\n \"con\",\n \"val\",\n \"lis.\",\n \"Vi\",\n \"va\",\n \"mus\",\n \"ac\",\n \"ve\",\n \"lit\",\n \"tin\",\n \"ci\",\n \"dunt,\",\n \"ac\",\n \"cum\",\n \"san\",\n \"mau\",\n \"ris\",\n \"id,\",\n \"sus\",\n \"ci\",\n \"pit\",\n \"tor\",\n \"tor.\",\n \"Nunc\",\n \"la\",\n \"ci\",\n \"nia\",\n \"ul\",\n \"tri\",\n \"ces\",\n \"est,\",\n \"in\",\n \"a\",\n \"li\",\n \"quet\",\n \"leo.'\"\n ],\n \"midis\": [\n {\n \"syllable\": \"'Lo\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 1\n },\n {\n \"syllable\": \"rem\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 2\n },\n {\n \"syllable\": \"ip\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 3\n },\n {\n \"syllable\": \"sum\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 4\n },\n {\n \"syllable\": \"do\",\n \"note\": \"G#4\",\n \"duration\": 4,\n \"order\": 5\n },\n {\n \"syllable\": \"lor\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 6\n },\n {\n \"syllable\": \"sit\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 7\n },\n {\n \"syllable\": \"a\",\n \"note\": \"G4\",\n \"duration\": 4,\n \"order\": 8\n },\n {\n \"syllable\": \"met,\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 9\n },\n {\n \"syllable\": \"con\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 10\n },\n {\n \"syllable\": \"sec\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 11\n },\n {\n \"syllable\": \"te\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 12\n },\n {\n \"syllable\": \"tur\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 13\n },\n {\n \"syllable\": \"a\",\n \"note\": \"G4\",\n \"duration\": 4,\n \"order\": 14\n },\n {\n \"syllable\": \"di\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 15\n },\n {\n \"syllable\": \"pis\",\n \"note\": \"G4\",\n \"duration\": 2,\n \"order\": 16\n },\n {\n \"syllable\": \"cing\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 17\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 18\n },\n {\n \"syllable\": \"lit.\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 19\n },\n {\n \"syllable\": \"In\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 20\n },\n {\n \"syllable\": \"a\",\n \"note\": \"G4\",\n \"duration\": 4,\n \"order\": 21\n },\n {\n \"syllable\": \"li\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 22\n },\n {\n \"syllable\": \"quet\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 23\n },\n {\n \"syllable\": \"est\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 24\n },\n {\n \"syllable\": \"sed\",\n \"note\": \"B4\",\n \"duration\": 4,\n \"order\": 25\n },\n {\n \"syllable\": \"me\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 26\n },\n {\n \"syllable\": \"tus\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 27\n },\n {\n \"syllable\": \"por\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 28\n },\n {\n \"syllable\": \"tti\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 29\n },\n {\n \"syllable\": \"tor\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 30\n },\n {\n \"syllable\": \"ve\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 31\n },\n {\n \"syllable\": \"ne\",\n \"note\": \"G4\",\n \"duration\": 2,\n \"order\": 32\n },\n {\n \"syllable\": \"na\",\n \"note\": \"D4\",\n \"duration\": 3,\n \"order\": 33\n },\n {\n \"syllable\": \"tis.\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 34\n },\n {\n \"syllable\": \"Quis\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 35\n },\n {\n \"syllable\": \"que\",\n \"note\": \"G#4\",\n \"duration\": 4,\n \"order\": 36\n },\n {\n \"syllable\": \"sa\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 37\n },\n {\n \"syllable\": \"git\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 38\n },\n {\n \"syllable\": \"tis\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 39\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 40\n },\n {\n \"syllable\": \"lit\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 41\n },\n {\n \"syllable\": \"nibh,\",\n \"note\": \"C4\",\n \"duration\": 2,\n \"order\": 42\n },\n {\n \"syllable\": \"sed\",\n \"note\": \"B4\",\n \"duration\": 4,\n \"order\": 43\n },\n {\n \"syllable\": \"sem\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 44\n },\n {\n \"syllable\": \"per\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 45\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 46\n },\n {\n \"syllable\": \"nim\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 47\n },\n {\n \"syllable\": \"fi\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 48\n },\n {\n \"syllable\": \"ni\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 49\n },\n {\n \"syllable\": \"bus\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 50\n },\n {\n \"syllable\": \"ac.\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 51\n },\n {\n \"syllable\": \"E\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 52\n },\n {\n \"syllable\": \"tiam\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 53\n },\n {\n \"syllable\": \"lao\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 54\n },\n {\n \"syllable\": \"reet\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 55\n },\n {\n \"syllable\": \"mag\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 56\n },\n {\n \"syllable\": \"na\",\n \"note\": \"D4\",\n \"duration\": 3,\n \"order\": 57\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 58\n },\n {\n \"syllable\": \"get\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 59\n },\n {\n \"syllable\": \"mi\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 60\n },\n {\n \"syllable\": \"sus\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 61\n },\n {\n \"syllable\": \"ci\",\n \"note\": \"C4\",\n \"duration\": 6,\n \"order\": 62\n },\n {\n \"syllable\": \"pit\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 63\n },\n {\n \"syllable\": \"ves\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 64\n },\n {\n \"syllable\": \"ti\",\n \"note\": \"B4\",\n \"duration\": 4,\n \"order\": 65\n },\n {\n \"syllable\": \"bu\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 66\n },\n {\n \"syllable\": \"lum.\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 67\n },\n {\n \"syllable\": \"In\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 68\n },\n {\n \"syllable\": \"hac\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 69\n },\n {\n \"syllable\": \"ha\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 70\n },\n {\n \"syllable\": \"bi\",\n \"note\": \"D4\",\n \"duration\": 4,\n \"order\": 71\n },\n {\n \"syllable\": \"tas\",\n \"note\": \"C4\",\n \"duration\": 3,\n \"order\": 72\n },\n {\n \"syllable\": \"se\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 73\n },\n {\n \"syllable\": \"pla\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 74\n },\n {\n \"syllable\": \"tea\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 75\n },\n {\n \"syllable\": \"dic\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 76\n },\n {\n \"syllable\": \"tumst.\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 77\n },\n {\n \"syllable\": \"Ves\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 78\n },\n {\n \"syllable\": \"ti\",\n \"note\": \"B4\",\n \"duration\": 4,\n \"order\": 79\n },\n {\n \"syllable\": \"bu\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 80\n },\n {\n \"syllable\": \"lum\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 81\n },\n {\n \"syllable\": \"me\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 82\n },\n {\n \"syllable\": \"tus\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 83\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 84\n },\n {\n \"syllable\": \"rat,\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 85\n },\n {\n \"syllable\": \"rut\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 86\n },\n {\n \"syllable\": \"rum\",\n \"note\": \"G4\",\n \"duration\": 2,\n \"order\": 87\n },\n {\n \"syllable\": \"sed\",\n \"note\": \"B4\",\n \"duration\": 4,\n \"order\": 88\n },\n {\n \"syllable\": \"com\",\n \"note\": \"F4\",\n \"duration\": 3,\n \"order\": 89\n },\n {\n \"syllable\": \"mo\",\n \"note\": \"D5\",\n \"duration\": 3,\n \"order\": 90\n },\n {\n \"syllable\": \"do\",\n \"note\": \"G#4\",\n \"duration\": 4,\n \"order\": 91\n },\n {\n \"syllable\": \"ut,\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 92\n },\n {\n \"syllable\": \"rut\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 93\n },\n {\n \"syllable\": \"rum\",\n \"note\": \"G4\",\n \"duration\": 2,\n \"order\": 94\n },\n {\n \"syllable\": \"id\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 95\n },\n {\n \"syllable\": \"nisl.\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 96\n },\n {\n \"syllable\": \"E\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 97\n },\n {\n \"syllable\": \"tiam\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 98\n },\n {\n \"syllable\": \"so\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 99\n },\n {\n \"syllable\": \"da\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 100\n },\n {\n \"syllable\": \"les\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 101\n },\n {\n \"syllable\": \"pha\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 102\n },\n {\n \"syllable\": \"ret\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 103\n },\n {\n \"syllable\": \"ra\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 104\n },\n {\n \"syllable\": \"nibh,\",\n \"note\": \"C4\",\n \"duration\": 2,\n \"order\": 105\n },\n {\n \"syllable\": \"sed\",\n \"note\": \"B4\",\n \"duration\": 4,\n \"order\": 106\n },\n {\n \"syllable\": \"por\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 107\n },\n {\n \"syllable\": \"ta\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 108\n },\n {\n \"syllable\": \"quam\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 109\n },\n {\n \"syllable\": \"con\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 110\n },\n {\n \"syllable\": \"val\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 111\n },\n {\n \"syllable\": \"lis\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 112\n },\n {\n \"syllable\": \"nec.\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 113\n },\n {\n \"syllable\": \"Cu\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 114\n },\n {\n \"syllable\": \"ra\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 115\n },\n {\n \"syllable\": \"bi\",\n \"note\": \"D4\",\n \"duration\": 4,\n \"order\": 116\n },\n {\n \"syllable\": \"tur\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 117\n },\n {\n \"syllable\": \"pre\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 118\n },\n {\n \"syllable\": \"tium\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 119\n },\n {\n \"syllable\": \"nisl\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 120\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 121\n },\n {\n \"syllable\": \"ros,\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 122\n },\n {\n \"syllable\": \"eu\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 123\n },\n {\n \"syllable\": \"sce\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 124\n },\n {\n \"syllable\": \"le\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 125\n },\n {\n \"syllable\": \"ris\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 126\n },\n {\n \"syllable\": \"que\",\n \"note\": \"G#4\",\n \"duration\": 4,\n \"order\": 127\n },\n {\n \"syllable\": \"ne\",\n \"note\": \"G4\",\n \"duration\": 2,\n \"order\": 128\n },\n {\n \"syllable\": \"que\",\n \"note\": \"G#4\",\n \"duration\": 4,\n \"order\": 129\n },\n {\n \"syllable\": \"pul\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 130\n },\n {\n \"syllable\": \"vi\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 131\n },\n {\n \"syllable\": \"nar\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 132\n },\n {\n \"syllable\": \"ut.\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 133\n },\n {\n \"syllable\": \"In\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 134\n },\n {\n \"syllable\": \"te\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 135\n },\n {\n \"syllable\": \"ger\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 136\n },\n {\n \"syllable\": \"com\",\n \"note\": \"F4\",\n \"duration\": 3,\n \"order\": 137\n },\n {\n \"syllable\": \"mo\",\n \"note\": \"D5\",\n \"duration\": 3,\n \"order\": 138\n },\n {\n \"syllable\": \"do\",\n \"note\": \"G#4\",\n \"duration\": 4,\n \"order\": 139\n },\n {\n \"syllable\": \"nunc\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 140\n },\n {\n \"syllable\": \"at\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 141\n },\n {\n \"syllable\": \"mas\",\n \"note\": \"C4\",\n \"duration\": 2,\n \"order\": 142\n },\n {\n \"syllable\": \"sa\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 143\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 144\n },\n {\n \"syllable\": \"le\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 145\n },\n {\n \"syllable\": \"men\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 146\n },\n {\n \"syllable\": \"tum,\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 147\n },\n {\n \"syllable\": \"blan\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 148\n },\n {\n \"syllable\": \"dit\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 149\n },\n {\n \"syllable\": \"rhon\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 150\n },\n {\n \"syllable\": \"cus\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 151\n },\n {\n \"syllable\": \"or\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 152\n },\n {\n \"syllable\": \"ci\",\n \"note\": \"C4\",\n \"duration\": 6,\n \"order\": 153\n },\n {\n \"syllable\": \"ac\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 154\n },\n {\n \"syllable\": \"cum\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 155\n },\n {\n \"syllable\": \"san.\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 156\n },\n {\n \"syllable\": \"Ves\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 157\n },\n {\n \"syllable\": \"ti\",\n \"note\": \"B4\",\n \"duration\": 4,\n \"order\": 158\n },\n {\n \"syllable\": \"bu\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 159\n },\n {\n \"syllable\": \"lum\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 160\n },\n {\n \"syllable\": \"com\",\n \"note\": \"F4\",\n \"duration\": 3,\n \"order\": 161\n },\n {\n \"syllable\": \"mo\",\n \"note\": \"D5\",\n \"duration\": 3,\n \"order\": 162\n },\n {\n \"syllable\": \"do\",\n \"note\": \"G#4\",\n \"duration\": 4,\n \"order\": 163\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 164\n },\n {\n \"syllable\": \"rat\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 165\n },\n {\n \"syllable\": \"non\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 166\n },\n {\n \"syllable\": \"tel\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 167\n },\n {\n \"syllable\": \"lus\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 168\n },\n {\n \"syllable\": \"fau\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 169\n },\n {\n \"syllable\": \"ci\",\n \"note\": \"C4\",\n \"duration\": 6,\n \"order\": 170\n },\n {\n \"syllable\": \"bus,\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 171\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 172\n },\n {\n \"syllable\": \"ges\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 173\n },\n {\n \"syllable\": \"tas\",\n \"note\": \"C4\",\n \"duration\": 3,\n \"order\": 174\n },\n {\n \"syllable\": \"tris\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 175\n },\n {\n \"syllable\": \"ti\",\n \"note\": \"B4\",\n \"duration\": 4,\n \"order\": 176\n },\n {\n \"syllable\": \"que\",\n \"note\": \"G#4\",\n \"duration\": 4,\n \"order\": 177\n },\n {\n \"syllable\": \"tur\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 178\n },\n {\n \"syllable\": \"pis\",\n \"note\": \"G4\",\n \"duration\": 2,\n \"order\": 179\n },\n {\n \"syllable\": \"vo\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 180\n },\n {\n \"syllable\": \"lut\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 181\n },\n {\n \"syllable\": \"pat.\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 182\n },\n {\n \"syllable\": \"Nul\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 183\n },\n {\n \"syllable\": \"lam\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 184\n },\n {\n \"syllable\": \"or\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 185\n },\n {\n \"syllable\": \"na\",\n \"note\": \"D4\",\n \"duration\": 3,\n \"order\": 186\n },\n {\n \"syllable\": \"re\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 187\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 188\n },\n {\n \"syllable\": \"get\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 189\n },\n {\n \"syllable\": \"nunc\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 190\n },\n {\n \"syllable\": \"vi\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 191\n },\n {\n \"syllable\": \"tae\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 192\n },\n {\n \"syllable\": \"rhon\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 193\n },\n {\n \"syllable\": \"cus.\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 194\n },\n {\n \"syllable\": \"Nul\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 195\n },\n {\n \"syllable\": \"la\",\n \"note\": \"G4\",\n \"duration\": 2,\n \"order\": 196\n },\n {\n \"syllable\": \"vel\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 197\n },\n {\n \"syllable\": \"tem\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 198\n },\n {\n \"syllable\": \"pus\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 199\n },\n {\n \"syllable\": \"mas\",\n \"note\": \"C4\",\n \"duration\": 2,\n \"order\": 200\n },\n {\n \"syllable\": \"sa,\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 201\n },\n {\n \"syllable\": \"non\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 202\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 203\n },\n {\n \"syllable\": \"ges\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 204\n },\n {\n \"syllable\": \"tas\",\n \"note\": \"C4\",\n \"duration\": 3,\n \"order\": 205\n },\n {\n \"syllable\": \"ip\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 206\n },\n {\n \"syllable\": \"sum.\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 207\n },\n {\n \"syllable\": \"Ut\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 208\n },\n {\n \"syllable\": \"bi\",\n \"note\": \"D4\",\n \"duration\": 4,\n \"order\": 209\n },\n {\n \"syllable\": \"ben\",\n \"note\": \"C4\",\n \"duration\": 2,\n \"order\": 210\n },\n {\n \"syllable\": \"dum\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 211\n },\n {\n \"syllable\": \"ri\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 212\n },\n {\n \"syllable\": \"sus\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 213\n },\n {\n \"syllable\": \"ut\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 214\n },\n {\n \"syllable\": \"dui\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 215\n },\n {\n \"syllable\": \"luc\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 216\n },\n {\n \"syllable\": \"tus,\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 217\n },\n {\n \"syllable\": \"at\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 218\n },\n {\n \"syllable\": \"bi\",\n \"note\": \"D4\",\n \"duration\": 4,\n \"order\": 219\n },\n {\n \"syllable\": \"ben\",\n \"note\": \"C4\",\n \"duration\": 2,\n \"order\": 220\n },\n {\n \"syllable\": \"dum\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 221\n },\n {\n \"syllable\": \"e\",\n \"note\": \"D4\",\n \"duration\": 12,\n \"order\": 222\n },\n {\n \"syllable\": \"nim\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 223\n },\n {\n \"syllable\": \"con\",\n \"note\": \"G4\",\n \"duration\": 3,\n \"order\": 224\n },\n {\n \"syllable\": \"val\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 225\n },\n {\n \"syllable\": \"lis.\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 226\n },\n {\n \"syllable\": \"Vi\",\n \"note\": \"F4\",\n \"duration\": 1,\n \"order\": 227\n },\n {\n \"syllable\": \"va\",\n \"note\": \"G#4\",\n \"duration\": 1,\n \"order\": 228\n },\n {\n \"syllable\": \"mus\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 229\n },\n {\n \"syllable\": \"ac\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 230\n },\n {\n \"syllable\": \"ve\",\n \"note\": \"D5\",\n \"duration\": 2,\n \"order\": 231\n },\n {\n \"syllable\": \"lit\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 232\n },\n {\n \"syllable\": \"tin\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 233\n },\n {\n \"syllable\": \"ci\",\n \"note\": \"C4\",\n \"duration\": 6,\n \"order\": 234\n },\n {\n \"syllable\": \"dunt,\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 235\n },\n {\n \"syllable\": \"ac\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 236\n },\n {\n \"syllable\": \"cum\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 237\n },\n {\n \"syllable\": \"san\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 238\n },\n {\n \"syllable\": \"mau\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 239\n },\n {\n \"syllable\": \"ris\",\n \"note\": \"D4\",\n \"duration\": 2,\n \"order\": 240\n },\n {\n \"syllable\": \"id,\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 241\n },\n {\n \"syllable\": \"sus\",\n \"note\": \"G#4\",\n \"duration\": 3,\n \"order\": 242\n },\n {\n \"syllable\": \"ci\",\n \"note\": \"C4\",\n \"duration\": 6,\n \"order\": 243\n },\n {\n \"syllable\": \"pit\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 244\n },\n {\n \"syllable\": \"tor\",\n \"note\": \"G#4\",\n \"duration\": 2,\n \"order\": 245\n },\n {\n \"syllable\": \"tor.\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 246\n },\n {\n \"syllable\": \"Nunc\",\n \"note\": \"B4\",\n \"duration\": 1,\n \"order\": 247\n },\n {\n \"syllable\": \"la\",\n \"note\": \"G4\",\n \"duration\": 2,\n \"order\": 248\n },\n {\n \"syllable\": \"ci\",\n \"note\": \"C4\",\n \"duration\": 6,\n \"order\": 249\n },\n {\n \"syllable\": \"nia\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 250\n },\n {\n \"syllable\": \"ul\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 251\n },\n {\n \"syllable\": \"tri\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 252\n },\n {\n \"syllable\": \"ces\",\n \"note\": \"D5\",\n \"duration\": 1,\n \"order\": 253\n },\n {\n \"syllable\": \"est,\",\n \"note\": \"G4\",\n \"duration\": 1,\n \"order\": 254\n },\n {\n \"syllable\": \"in\",\n \"note\": \"D4\",\n \"duration\": 1,\n \"order\": 255\n },\n {\n \"syllable\": \"a\",\n \"note\": \"G4\",\n \"duration\": 4,\n \"order\": 256\n },\n {\n \"syllable\": \"li\",\n \"note\": \"F4\",\n \"duration\": 2,\n \"order\": 257\n },\n {\n \"syllable\": \"quet\",\n \"note\": \"B4\",\n \"duration\": 2,\n \"order\": 258\n },\n {\n \"syllable\": \"leo.'\",\n \"note\": \"C4\",\n \"duration\": 1,\n \"order\": 259\n }\n ],\n \"sentiment\": {\n \"tag_name\": \"Positive\",\n \"tag_id\": 122921383,\n \"confidence\": 0.56\n },\n \"urgency\": {\n \"tag_name\": \"Not Urgent\",\n \"tag_id\": 77712469,\n \"confidence\": 1.0\n },\n \"color\": [\n 0,\n 0,\n 0\n ],\n \"effect\": 0,\n \"effectSpeed\": 2.0,\n \"effectScale\": 1.0\n}"}];

/* [
  {
    poem:
      "ToddHater has followed me across the continents, trying to hunt me for sport. Don't listen to him!",
    author: "Todd",
    id: 5,
    json:
      '{\n  "poem": "\'ToddHater has followed me across the continents, trying to hunt me for sport. Don\\\\\'t listen to him!\'",\n  "author": "\'Todd\'",\n  "syllables": [\n    "\'Tod",\n    "dHa",\n    "ter",\n    "has",\n    "fol",\n    "lo",\n    "wed",\n    "me",\n    "ac",\n    "ross",\n    "the",\n    "con",\n    "ti",\n    "nents,",\n    "trying",\n    "to",\n    "hunt",\n    "me",\n    "for",\n    "sport.",\n    "Don\\\\\'t",\n    "lis",\n    "ten",\n    "to",\n    "him!\'"\n  ],\n  "midis": [\n    {\n      "syllable": "\'Tod",\n      "note": "C4",\n      "duration": 1,\n      "order": 1\n    },\n    {\n      "syllable": "dHa",\n      "note": "G#4",\n      "duration": 1,\n      "order": 2\n    },\n    {\n      "syllable": "ter",\n      "note": "G4",\n      "duration": 1,\n      "order": 3\n    },\n    {\n      "syllable": "has",\n      "note": "C4",\n      "duration": 1,\n      "order": 4\n    },\n    {\n      "syllable": "fol",\n      "note": "B4",\n      "duration": 1,\n      "order": 5\n    },\n    {\n      "syllable": "lo",\n      "note": "G#4",\n      "duration": 1,\n      "order": 6\n    },\n    {\n      "syllable": "wed",\n      "note": "D4",\n      "duration": 1,\n      "order": 7\n    },\n    {\n      "syllable": "me",\n      "note": "B4",\n      "duration": 2,\n      "order": 8\n    },\n    {\n      "syllable": "ac",\n      "note": "F4",\n      "duration": 1,\n      "order": 9\n    },\n    {\n      "syllable": "ross",\n      "note": "C4",\n      "duration": 1,\n      "order": 10\n    },\n    {\n      "syllable": "the",\n      "note": "G#4",\n      "duration": 1,\n      "order": 11\n    },\n    {\n      "syllable": "con",\n      "note": "G4",\n      "duration": 1,\n      "order": 12\n    },\n    {\n      "syllable": "ti",\n      "note": "B4",\n      "duration": 1,\n      "order": 13\n    },\n    {\n      "syllable": "nents,",\n      "note": "D5",\n      "duration": 1,\n      "order": 14\n    },\n    {\n      "syllable": "trying",\n      "note": "C4",\n      "duration": 1,\n      "order": 15\n    },\n    {\n      "syllable": "to",\n      "note": "D5",\n      "duration": 2,\n      "order": 16\n    },\n    {\n      "syllable": "hunt",\n      "note": "F4",\n      "duration": 1,\n      "order": 17\n    },\n    {\n      "syllable": "me",\n      "note": "B4",\n      "duration": 2,\n      "order": 18\n    },\n    {\n      "syllable": "for",\n      "note": "D5",\n      "duration": 1,\n      "order": 19\n    },\n    {\n      "syllable": "sport.",\n      "note": "D4",\n      "duration": 1,\n      "order": 20\n    },\n    {\n      "syllable": "Don\\\\\'t",\n      "note": "D4",\n      "duration": 1,\n      "order": 21\n    },\n    {\n      "syllable": "lis",\n      "note": "G4",\n      "duration": 1,\n      "order": 22\n    },\n    {\n      "syllable": "ten",\n      "note": "F4",\n      "duration": 1,\n      "order": 23\n    },\n    {\n      "syllable": "to",\n      "note": "D5",\n      "duration": 2,\n      "order": 24\n    },\n    {\n      "syllable": "him!\'",\n      "note": "D4",\n      "duration": 1,\n      "order": 25\n    }\n  ],\n  "sentiment": {\n    "tag_name": "Negative",\n    "tag_id": 122921385,\n    "confidence": 0.711\n  },\n  "urgency": {\n    "tag_name": "Not Urgent",\n    "tag_id": 77712469,\n    "confidence": 0.973\n  },\n  "color": [\n    0,\n    0,\n    0\n  ],\n  "effect": 0,\n  "effectSpeed": 2.0,\n  "effectScale": 1.0\n}'
  }
];

const query = window.location.search;
var poemId = new URLSearchParams(query);
fetch('https://poetshack.com/api/poems/' + poemId.get(pid))
  .then(response => response.json())
  .then(data => {
    poemData = data;
  })
  .catch(console.error);
*/
const sampler = new Tone.Sampler(
  {
    C4: "C4.wav",
    G4: "G4.wav"
  },
  {
    onload: () => {
      document.querySelector("button").removeAttribute("disabled");
    }
  }
).toMaster();

function displayText() {
  var counter = -1; // loop counter
  var interval;
  var wordDuration = wordDur();
  var poem = JSON.parse(poemData[0].json);
  var duration = wordDuration[0][1] * slydur;
  if(duration >= 3000){
    duration = wordDuration[0][1] * longSlydur;
  }
  function repeat() {
    counter += 1;

    interval = setInterval(function () {
      clearInterval(interval);

      if (counter < wordDuration.length) {
        document.getElementById("dis").innerHTML +=
          "<span class='fadeIn'>" + wordDuration[counter][0] + " </span>";
        sampler.triggerAttackRelease(
          poem.midis[counter].note,
          poem.midis[counter].duration + 1
        );
        duration = wordDuration[counter][1] * slydur;
        if(duration >= 3000){
          duration = wordDuration[counter][1] * longSlydur;
        }
        setTimeout(function(){
          var fade = document.querySelector(".fadeIn");
          fade.classList.remove("fadeIn");
        }, slydur);
        repeat();
      } else {
        counter = -1;
      }
    }, duration);
  }
  repeat();
}
function wordDur() {
  var poem = JSON.parse(poemData[0].json);
  var words = poem.poem.split(" ");
  var wordDuration = [];
  for (var i = 0; i < words.length; i++) {
    var dur = 0;
    for (var a = 0; a < poem.midis.length; a++) {
      if (words[i].includes(poem.midis[a].syllable)) {
        dur++;
      }
    }
    var temp = [words[i], dur];
    wordDuration.push(temp);
  }
  return wordDuration;
}
